<!DOCTYPE html>
<html>
<head>
    <title>Recipe App - Add Recipe</title>
</head>
<body>
    <header>
        <h1>Recipe App</h1>
    </header>
    <main>
        <h2>Add Recipe</h2>
        <!-- Your existing form for adding a recipe -->
        <form action="/addRecipe" method="POST">
            <label for="recipeName">Recipe Name:</label>
            <input type="text" id="recipeName" name="recipeName">

            <label for="cuisineId">Cuisine:</label>
            <select id="cuisineId" name="cuisineId">
              <option value="all">All</option>
              <option value="1">Italian</option>
              <option value="2">Mexican</option>
              <option value="3">Chinese</option>
              <option value="4">Indian</option>
              <option value="5">American</option>
              <option value="6">Other</option>
            </select>

            <label for="time">Time (in minutes):</label>
            <input type="number" id="time" name="time">

            <button type="submit">Add Recipe</button>
        </form>

        <h2>Filter Recipes by Cuisine</h2>
        <!-- Your existing form for filtering recipes -->
        <form action="/filterRecipes" method="GET">
            <label for="filterCuisine">Select Cuisine:</label>
            <select id="filterCuisine" name="filterCuisine">
                <option value="all">All</option>
                <option value="1">Italian</option>
                <option value="2">Mexican</option>
                <option value="3">Chinese</option>
                <option value="4">Indian</option>
                <option value="5">American</option>
                <option value="6">Other</option>
            </select>
            <button type="submit">Filter</button>
        </form>

        <h2>Recipes</h2>
        <table id="recipesTable">
            <thead>
                <tr>
                    <th>Recipe Name</th>
                    <th>Cuisine</th>
                    <th>Time (minutes)</th>
                </tr>
            </thead>
            <tbody id="recipesTableBody">
                <!-- Table body will be populated dynamically using JavaScript -->
            </tbody>
        </table>
    </main>
    <footer>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Map cuisine IDs to names
            const cuisineMap = {
                1: 'Italian',
                2: 'Mexican',
                3: 'Chinese',
                4: 'Indian',
                5: 'American',
                6: 'Other',
            };

            // Fetch recipes data from the server and update the table
            fetch('/filterRecipes') // Assuming this endpoint returns all recipes
                .then(response => response.json())
                .then(recipes => {
                    const tableBody = document.getElementById('recipesTableBody');

                    recipes.forEach(recipe => {
                        const row = document.createElement('tr');
                        const nameCell = document.createElement('td');
                        const cuisineCell = document.createElement('td');
                        const timeCell = document.createElement('td');

                        nameCell.textContent = recipe.name;
                        cuisineCell.textContent = cuisineMap[recipe.cuisineId] || 'Unknown Cuisine';
                        timeCell.textContent = recipe.time;

                        // Append elements to the row
                        row.appendChild(nameCell);
                        row.appendChild(cuisineCell);
                        row.appendChild(timeCell);

                        tableBody.appendChild(row);
                    });
                })
                .catch(error => console.error('Error fetching recipes:', error));
        });
    </script>
</body>
</html>